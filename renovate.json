{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": [
	"mergeConfidence:all-badges",
	"config:best-practices"
  ],
  "timezone": "Australia/Adelaide",
  "ansible": {
	"managerFilePatterns": [
		"/(^|/)playbooks/[^/]+\\.ya?ml$/"
	]
  },
  "customManagers": [
	{
	  "customType": "regex",
	  "managerFilePatterns": [
		"/(^|/)playbooks/[^/]+\\.ya?ml$/"
	  ],
	  "matchStrings": [
  		"renovate: datasource=(?<datasource>.*?) depName=(?<depName>.*?)( versioning=(?<versioning>.*?))?\\s.*_version: '(?<currentValue>.*)'\\s"
	  ],
	  "versioningTemplate": "{{#if versioning}}{{{versioning}}}{{else}}semver{{/if}}",
	  "datasourceTemplate": "docker"
	}
  ],
  "packageRules": [
    {
      "matchDatasources": ["docker"],
      "enabled": true,
      "commitMessageTopic": "container image {{depName}}",
      "commitMessageExtra": "to {{#if isSingleVersion}}v{{{newVersion}}}{{else}}{{{newValue}}}{{/if}}",
      "matchUpdateTypes": ["major", "minor", "patch"]
    },
    {
      "matchDatasources": ["docker"],
      "semanticCommitScope": "images",
      "commitMessageTopic": "{{depName}}",
      "commitMessageExtra": "to {{{newValue}}}",
      "separateMinorPatch": true
    }
  ]
}
