---
- name: Deploy Vaultwarden

  hosts: vaultwarden

  vars:

    # Vaultwarden facts
    vaultwarden_image_name: vaultwarden/server
    vaultwarden_image_tag: 1.33.2-alpine
    vaultwarden_service_name: vaultwarden
    vaultwarden_service_port: 8080
    vaultwarden_volume_name: vaultwarden

  tasks:

    - name: Load homelab vars
      ansible.builtin.include_vars:
        file: vars/homelab_env.yaml

    - name: Deploy a containerised instance of Vaultwarden
      ansible.builtin.include_tasks:
        file: tasks/deploy-vaultwarden.yaml
